(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{14:function(t,e,a){},282:function(t,e,a){"use strict";a.r(e);var n=a(7),i=a.n(n),s=a(28),r=a.n(s),c=(a(38),a(29)),o=a(30),d=a(33),u=a(32),h=(a(14),a(31)),l=a(4),f=a.n(l),p=a(1),j=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).state={domain:"",corpId:"",authCode:"",userId:"",userName:"",showType:0,groupId:0,shiftId:0,groupData:{positions:[{address:"\u751f\u7269\u79d1\u6280\u4ea7\u4e1a\u56ed\u533a\u7ecf\u4e8c\u8def21\u53f7",latitude:"36.687495",accuracy:"0",title:"\u9752\u85cf\u9ad8\u539f\u81ea\u7136\u535a\u7269\u9986",longitude:"101.750329"}],members:[{role:"Attendance",type:"StaffMember"}],name:"\u767d\u73ed\u8003\u52e4"},shiftData:{classGroupName:"def",shiftName:"\u767d\u73ed",checkTime:"2020-10-18 08:00:00"},scheduleInfo:{schedules:[]},record:{deviceName:"\u4e1c\u95e8\u6253\u5361\u673a",deviceId:1,time:"2021-10-18 09:00:00"},query:{workDateFrom:"2021-10-18 08:00:00",workDateTo:"2021-10-18 08:00:00",offset:0,limit:50,userIdList:[]},recordList:[],leaveInfo:{startTime:"2021-10-18 09:00:00",endTime:"2021-10-18 09:00:00"},leaveList:[]},n}return Object(o.a)(a,[{key:"render",value:function(){var t,e=this;return""===this.state.userId&&this.login(),0===this.state.showType?t=Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)("h2",{children:"\u8003\u52e4\u529f\u80fd\u6f14\u793a"}),Object(p.jsx)("p",{children:Object(p.jsx)("button",{type:"button",onClick:function(){return e.createGroup()},children:"\u521b\u5efa\u8003\u52e4\u7ec4"})}),Object(p.jsx)("p",{children:Object(p.jsx)("button",{type:"button",onClick:function(){return e.createShift()},children:"\u521b\u5efa\u8003\u52e4\u73ed\u6b21"})}),Object(p.jsx)("p",{children:Object(p.jsx)("button",{type:"button",onClick:function(){return e.attendanceSchedule()},children:"\u8fdb\u884c\u8003\u52e4\u6392\u73ed"})}),Object(p.jsx)("p",{children:Object(p.jsx)("button",{type:"button",onClick:function(){return e.uploadRecord()},children:"\u4e0a\u4f20\u6253\u5361\u8bb0\u5f55"})}),Object(p.jsx)("p",{children:Object(p.jsx)("button",{type:"button",onClick:function(){return e.attendanceList()},children:"\u83b7\u53d6\u6253\u5361\u7ed3\u679c"})}),Object(p.jsx)("p",{children:Object(p.jsx)("button",{type:"button",onClick:function(){return e.leaveStatus()},children:"\u67e5\u770b\u8bf7\u5047\u72b6\u6001"})})]}):1===this.state.showType?t=Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:Object(p.jsx)("button",{type:"button",onClick:function(){return e.back()},children:"\u8fd4\u56de"})}),Object(p.jsx)("h3",{children:"\u6253\u5361\u8bb0\u5f55\uff1a"}),this.state.recordList.map((function(t,a){return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{children:["\u5de5\u4f5c\u65e5\uff1a",function(){return e.getDate(new Date(t.workDate))},Object(p.jsx)("br",{}),"\u6253\u5361\u65f6\u95f4\uff1a",function(){return e.getDate(new Date(t.userCheckTime))}]})},a)}))]}):2===this.state.showType&&(t=Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:Object(p.jsx)("button",{type:"button",onClick:function(){return e.back()},children:"\u8fd4\u56de"})}),Object(p.jsx)("h3",{children:"\u8bf7\u5047\u72b6\u6001\uff1a"}),this.state.leaveList.map((function(t,a){return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{children:["\u5f00\u59cb\u65f6\u95f4\uff1a",function(){return e.getDate(new Date(t.startTime))},Object(p.jsx)("br",{}),"\u7ed3\u675f\u65f6\u95f4\uff1a",function(){return e.getDate(new Date(t.endTime))},Object(p.jsx)("br",{}),"\u8bf7\u5047\u65f6\u957f\uff1a",function(){return e.getLeaveTime(e.durationPercent,t.durationUnit)},Object(p.jsx)("br",{})]})},a)}))]})),Object(p.jsx)("div",{children:t})}},{key:"back",value:function(){this.setState({showType:0})}},{key:"getLeaveTime",value:function(t,e){return t+t}},{key:"getDate",value:function(t){return t.getYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"   "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}},{key:"leaveStatus",value:function(){var t=this,e=this.state.leaveInfo;e.userIdList=this.state.userId,f.a.post(this.state.domain+"/attendance/leaveStatus",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((function(e){e&&e.data.success?e.data.data&&t.setState({leaveList:e.data.data,showType:2}):alert("leaveStatus failed ---\x3e"+JSON.stringify(e))})).catch((function(t){alert("leaveStatus err, "+JSON.stringify(t))}))}},{key:"attendanceList",value:function(){var t=this,e=this.state.query;e.userIdList.push(this.state.userId),f.a.post(this.state.domain+"/attendance/attendanceList",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((function(e){e&&e.data.success?e.data.data&&t.setState({recordList:e.data.data,showType:1}):alert("attendanceList failed ---\x3e"+JSON.stringify(e))})).catch((function(t){alert("attendanceList err, "+JSON.stringify(t))}))}},{key:"uploadRecord",value:function(){var t=this.state.record;t.userId=this.state.userId,f.a.post(this.state.domain+"/attendance/uploadRecord",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then((function(t){t&&t.data.success?t.data.data.success&&alert("\u4e0a\u4f20\u6253\u5361\u6210\u529f\uff01"):alert("uploadRecord failed ---\x3e"+JSON.stringify(t))})).catch((function(t){alert("uploadRecord err, "+JSON.stringify(t))}))}},{key:"attendanceSchedule",value:function(){var t=this.state.scheduleInfo;t.userId=this.state.userId,t.groupId=this.state.groupId;var e={shiftId:this.state.shiftId,userid:this.state.userId,workDate:(new Date).getTime()};t.schedules.push(e),f.a.post(this.state.domain+"/attendance/attendanceSchedule",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then((function(t){t&&t.data.success?t.data.data.success&&alert("\u6392\u73ed\u6210\u529f\uff01"):alert("attendanceSchedule failed ---\x3e"+JSON.stringify(t))})).catch((function(t){alert("attendanceSchedule err, "+JSON.stringify(t))}))}},{key:"createShift",value:function(){var t=this,e=this.state.shiftData;e.userId=this.state.userId,f.a.post(this.state.domain+"/attendance/createShift",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((function(e){e&&e.data.success?e.data.data&&(t.setState({shiftId:e.data.data.id}),alert("\u521b\u5efa\u73ed\u6b21\u6210\u529f\uff01")):alert("createShift failed ---\x3e"+JSON.stringify(e))})).catch((function(t){alert("createShift err, "+JSON.stringify(t))}))}},{key:"createGroup",value:function(){var t=this,e=this.state.groupData;e.userId=this.state.userId,f.a.post(this.state.domain+"/attendance/createGroup",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((function(e){e&&e.data.success?e.data.data&&(t.setState({groupId:e.data.data.id}),alert("\u521b\u5efa\u8003\u52e4\u7ec4\u6210\u529f\uff01")):alert("createGroup failed ---\x3e"+JSON.stringify(e))})).catch((function(t){alert("createGroup err, "+JSON.stringify(t))}))}},{key:"login",value:function(){var t=this;f.a.get(this.state.domain+"/getCorpId").then((function(e){e.data&&t.loginAction(e.data)})).catch((function(t){alert("corpId err, "+JSON.stringify(t))}))}},{key:"loginAction",value:function(t){var e=this;h.runtime.permission.requestAuthCode({corpId:t,onSuccess:function(t){e.state.authCode=t.code,f.a.get(e.state.domain+"/login?authCode="+e.state.authCode).then((function(t){if(t&&t.data.success){var a=t.data.data.userId,n=t.data.data.userName;alert("\u767b\u5f55\u6210\u529f\uff0c\u4f60\u597d"+n),setTimeout((function(){e.setState({userId:a,userName:n})}),0)}else alert("login failed ---\x3e"+JSON.stringify(t))})).catch((function(t){alert("httpRequest failed ---\x3e"+JSON.stringify(t))}))},onFail:function(t){alert("requestAuthCode failed ---\x3e"+JSON.stringify(t))}})}}]),a}(i.a.Component),b=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,283)).then((function(e){var a=e.getCLS,n=e.getFID,i=e.getFCP,s=e.getLCP,r=e.getTTFB;a(t),n(t),i(t),s(t),r(t)}))};r.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(j,{})}),document.getElementById("root")),b()},38:function(t,e,a){}},[[282,1,2]]]);
//# sourceMappingURL=main.431a98e5.chunk.js.map