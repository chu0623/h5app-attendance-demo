(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{205:function(e,t,a){},295:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(31),c=a.n(i),r=(a(205),a(13)),d=a(14),o=a(23),l=a(25),u=(a(85),a(40)),h=a.n(u),j=a(34),b=a.n(j),f=a(6),m=a(297),p=a(298),O=a(124),x=(a(81),a(4)),y=function(e){var t=m.a.useForm(),a=Object(f.a)(t,1)[0],s=Object(n.useState)(!1),i=Object(f.a)(s,2),c=(i[0],i[1],Object(n.useState)(null)),r=Object(f.a)(c,2);r[0],r[1],new Date;return Object(x.jsxs)("div",{children:[Object(x.jsxs)("h4",{className:"title",children:["\u8003\u52e4\u6a21\u5757\u2014\u2014",e.title]}),Object(x.jsxs)(m.a,{form:a,onFinish:function(t){alert(t,"-------"),e.onClick(t)},initialValues:{name:"\u5c0f\u767d\u8003\u52e4\u6d4b\u8bd5\u4e00\u7ec4",title:"\u9752\u85cf\u9ad8\u539f\u81ea\u7136\u535a\u7269\u9986",address:"\u751f\u7269\u79d1\u6280\u4ea7\u4e1a\u56ed\u533a\u7ecf\u4e8c\u8def21\u53f7",latitude:"36.687495",longitude:"101.750329"},children:[Object(x.jsx)(m.a.Item,{label:"\u8003\u52e4\u7ec4\u540d\u79f0",name:"name",children:Object(x.jsx)(p.a,{placeholder:"\u8bf7\u8f93\u5165\u8003\u52e4\u7ec4\u540d\u79f0"})}),Object(x.jsx)(m.a.Item,{label:"\u8003\u52e4\u6807\u9898",name:"title",children:Object(x.jsx)(p.a,{placeholder:"\u8bf7\u8f93\u5165\u8003\u52e4\u6807\u9898"})}),Object(x.jsx)(m.a.Item,{label:"\u8003\u52e4\u5730\u5740",name:"address",children:Object(x.jsx)(p.a,{placeholder:"\u8bf7\u8f93\u5165\u8003\u52e4\u5730\u5740"})}),Object(x.jsx)(m.a.Item,{label:"\u8003\u52e4\u5730\u5740\u7eac\u5ea6",name:"latitude",children:Object(x.jsx)(p.a,{placeholder:"\u8bf7\u8f93\u5165\u8003\u52e4\u5730\u5740\u7eac\u5ea6"})}),Object(x.jsx)(m.a.Item,{label:"\u8003\u52e4\u5730\u5740\u7ecf\u5ea6",name:"longitude",children:Object(x.jsx)(p.a,{placeholder:"\u8bf7\u8f93\u5165\u8003\u52e4\u5730\u5740\u7ecf\u5ea6"})}),Object(x.jsx)(O.a,{htmlType:"submit",type:"primary",children:"\u63d0\u4ea4"})]})]})},g=b()().add(1,"days").format("YYYY-MM-DD")+" 08:00:00",v=b()().add(1,"days").format("YYYY-MM-DD")+" 18:00:00",S=function(e){var t=m.a.useForm(),a=Object(f.a)(t,1)[0],s=Object(n.useState)(!1),i=Object(f.a)(s,2),c=(i[0],i[1],Object(n.useState)(null)),r=Object(f.a)(c,2);r[0],r[1],new Date;return Object(x.jsxs)("div",{children:[Object(x.jsxs)("h4",{className:"title",children:["\u8003\u52e4\u6a21\u5757\u2014\u2014",e.title]}),Object(x.jsxs)(m.a,{form:a,onFinish:function(t){e.onClick(t)},initialValues:{shiftName:"\u5c0f\u767d\u8003\u52e4\u73ed\u6b21\u767d\u73ed",beginTime:g,endTime:v},children:[Object(x.jsx)(m.a.Item,{label:"\u73ed\u6b21\u540d\u79f0",name:"shiftName",children:Object(x.jsx)(p.a,{placeholder:"\u8bf7\u8f93\u5165\u73ed\u6b21\u540d\u79f0"})}),Object(x.jsx)(m.a.Item,{label:"\u5f00\u59cb\u65f6\u95f4",name:"beginTime",children:Object(x.jsx)(p.a,{placeholder:"\u8bf7\u8f93\u5165"})}),Object(x.jsx)(m.a.Item,{label:"\u7ed3\u675f\u65f6\u95f4",name:"endTime",children:Object(x.jsx)(p.a,{placeholder:"\u8bf7\u8f93\u5165"})}),Object(x.jsx)(O.a,{htmlType:"submit",type:"primary",children:"\u63d0\u4ea4"})]})]})},I=function(e){var t=m.a.useForm(),a=Object(f.a)(t,1)[0],s=Object(n.useState)(!1),i=Object(f.a)(s,2),c=(i[0],i[1],Object(n.useState)(null)),r=Object(f.a)(c,2);r[0],r[1],new Date;return Object(x.jsxs)("div",{children:[Object(x.jsxs)("h4",{className:"title",children:["\u8003\u52e4\u6a21\u5757\u2014\u2014",e.title]}),Object(x.jsxs)(m.a,{form:a,onFinish:function(t){e.onClick(t)},initialValues:{shiftName:"\u4e1c\u95e8\u6253\u5361\u673a",time:b()().format("YYYY-MM-DD HH:mm:ss")},children:[Object(x.jsx)(m.a.Item,{label:"\u6253\u5361\u8bbe\u5907\u540d\u79f0",name:"deviceName",children:Object(x.jsx)(p.a,{placeholder:"\u8bf7\u8f93\u5165\u6253\u5361\u8bbe\u5907\u540d\u79f0"})}),Object(x.jsx)(m.a.Item,{label:"\u6253\u5361\u65f6\u95f4",name:"time",children:Object(x.jsx)(p.a,{placeholder:"\u8bf7\u8f93\u5165\u6253\u5361\u65f6\u95f4"})}),Object(x.jsx)(O.a,{htmlType:"submit",type:"primary",children:"\u63d0\u4ea4"})]})]})},T=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={domain:"",corpId:"",authCode:"",userId:"01186053144726141594",userName:"",showType:0,groupId:889575013,shiftId:878845020,groupData:{positions:[{address:"\u751f\u7269\u79d1\u6280\u4ea7\u4e1a\u56ed\u533a\u7ecf\u4e8c\u8def21\u53f7",latitude:"36.687495",accuracy:"0",title:"\u9752\u85cf\u9ad8\u539f\u81ea\u7136\u535a\u7269\u9986",longitude:"101.750329"}],members:[{role:"Attendance",type:"StaffMember"}],name:"\u767d\u73ed\u8003\u52e4"},shiftData:{classGroupName:"def",shiftName:"\u767d\u73ed",beginTime:"2020-10-18 08:00:00",endTime:"2020-10-18 18:00:00"},scheduleInfo:{schedules:[]},record:{deviceName:"\u4e1c\u95e8\u6253\u5361\u673a",deviceId:1,time:"2021-10-09 09:00:00"},query:{workDateFrom:b()().subtract(7,"days").format("YYYY-MM-DD HH:mm:ss"),workDateTo:b()().format("YYYY-MM-DD HH:mm:ss"),offset:0,limit:50,userIdList:[]},recordList:[],leaveInfo:{startTime:b()().subtract(7,"days").format("YYYY-MM-DD HH:mm:ss"),endTime:b()().format("YYYY-MM-DD HH:mm:ss")},leaveList:[]},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return""===this.state.userId&&this.login(),Object(x.jsxs)("div",{className:"App",children:[0===this.state.showType&&Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("h2",{children:"\u8003\u52e4\u529f\u80fd\u6f14\u793a"}),Object(x.jsx)("p",{children:Object(x.jsx)("button",{type:"button",onClick:function(){return e.setState({showType:3})},children:"\u521b\u5efa\u8003\u52e4\u7ec4"})}),Object(x.jsx)("p",{children:Object(x.jsx)("button",{type:"button",onClick:function(){return e.setState({showType:4})},children:"\u521b\u5efa\u8003\u52e4\u73ed\u6b21"})}),Object(x.jsx)("p",{children:Object(x.jsx)("button",{type:"button",onClick:function(){return e.attendanceSchedule()},children:"\u8fdb\u884c\u8003\u52e4\u6392\u73ed"})}),Object(x.jsx)("p",{children:Object(x.jsx)("button",{type:"button",onClick:function(){return e.setState({showType:5})},children:"\u4e0a\u4f20\u6253\u5361\u8bb0\u5f55"})}),Object(x.jsx)("p",{children:Object(x.jsx)("button",{type:"button",onClick:function(){return e.attendanceList()},children:"\u67e5\u770b7\u5929\u5185\u6253\u5361\u7ed3\u679c"})}),Object(x.jsx)("p",{children:Object(x.jsx)("button",{type:"button",onClick:function(){return e.leaveStatus()},children:"\u67e5\u770b7\u5929\u5185\u8bf7\u5047\u72b6\u6001"})})]}),5===this.state.showType&&Object(x.jsx)("div",{children:Object(x.jsx)(I,{title:"\u4e0a\u4f20\u6253\u5361\u8bb0\u5f55",onClick:function(t){return e.uploadRecord(t)}})}),4===this.state.showType&&Object(x.jsx)("div",{children:Object(x.jsx)(S,{title:"\u521b\u5efa\u8003\u52e4\u73ed\u6b21",onClick:function(t){return e.createShift(t)}})}),3===this.state.showType&&Object(x.jsx)("div",{children:Object(x.jsx)(y,{title:"\u521b\u5efa\u8003\u52e4\u7ec4",onClick:function(t){return e.createGroup(t)}})}),1===this.state.showType&&Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{children:Object(x.jsx)("button",{type:"button",onClick:function(){return e.back()},children:"\u8fd4\u56de"})}),Object(x.jsx)("h3",{children:"\u6253\u5361\u8bb0\u5f55\uff1a"}),this.state.recordList.map((function(t,a){return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{children:["\u5de5\u4f5c\u65e5\uff1a",function(){return e.getDate(new Date(t.workDate))},Object(x.jsx)("br",{}),"\u6253\u5361\u65f6\u95f4\uff1a",function(){return e.getDate(new Date(t.userCheckTime))}]})},a)}))]}),2===this.state.showType&&Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{children:Object(x.jsx)("button",{type:"button",onClick:function(){return e.back()},children:"\u8fd4\u56de"})}),Object(x.jsx)("h3",{children:"\u8bf7\u5047\u72b6\u6001\uff1a"}),this.state.leaveList.map((function(t,a){return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{children:["\u5f00\u59cb\u65f6\u95f4\uff1a",function(){return e.getDate(new Date(t.startTime))},Object(x.jsx)("br",{}),"\u7ed3\u675f\u65f6\u95f4\uff1a",function(){return e.getDate(new Date(t.endTime))},Object(x.jsx)("br",{}),"\u8bf7\u5047\u65f6\u957f\uff1a",function(){return e.getLeaveTime(e.durationPercent,t.durationUnit)},Object(x.jsx)("br",{})]})},a)}))]})]})}},{key:"back",value:function(){this.setState({showType:0})}},{key:"getLeaveTime",value:function(e,t){return e+e}},{key:"getDate",value:function(e){return e.getYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"   "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}},{key:"leaveStatus",value:function(){var e=this,t=this.state.leaveInfo;t.userIdList=this.state.userId,h.a.post(this.state.domain+"/attendance/leaveStatus",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then((function(t){t&&t.data.success?t.data.data&&e.setState({leaveList:t.data.data,showType:2}):alert("leaveStatus failed ---\x3e"+JSON.stringify(t))})).catch((function(e){alert("leaveStatus err, "+JSON.stringify(e))}))}},{key:"attendanceList",value:function(){var e=this,t=this.state.query;t.userIdList.push(this.state.userId),h.a.post(this.state.domain+"/attendance/attendanceList",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then((function(t){t&&t.data.success?t.data.data&&e.setState({recordList:t.data.data,showType:1}):alert("attendanceList failed ---\x3e"+JSON.stringify(t))})).catch((function(e){alert("attendanceList err, "+JSON.stringify(e))}))}},{key:"uploadRecord",value:function(e){var t=e.deviceName,a=e.time,n=this.state.record;n.userId=this.state.userId,n.deviceName=t,n.time=a,h.a.post(this.state.domain+"/attendance/uploadRecord",JSON.stringify(n),{headers:{"Content-Type":"application/json"}}).then((function(e){e&&e.data.success?e.data.data.success&&alert("\u4e0a\u4f20\u6253\u5361\u6210\u529f\uff01"):alert("uploadRecord failed ---\x3e"+JSON.stringify(e))})).catch((function(e){alert("uploadRecord err, "+JSON.stringify(e))}))}},{key:"attendanceSchedule",value:function(){var e=this.state.scheduleInfo;e.userId=this.state.userId,e.groupId=this.state.groupId;var t={shiftId:this.state.shiftId,userid:this.state.userId,workDate:(new Date).getTime()};e.schedules.push(t),h.a.post(this.state.domain+"/attendance/attendanceSchedule",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((function(e){e&&e.data.success?e.data.data.success&&alert("\u6392\u73ed\u6210\u529f\uff01"):alert("attendanceSchedule failed ---\x3e"+JSON.stringify(e))})).catch((function(e){alert("attendanceSchedule err, "+JSON.stringify(e))}))}},{key:"createShift",value:function(e){var t=this,a=e.shiftName,n=e.beginTime,s=e.endTime,i=this.state.shiftData;i.userId=this.state.userId,i.groupId=this.state.groupId,i.shiftName=a,i.beginTime=n,i.endTime=s,h.a.post(this.state.domain+"/attendance/createShift",JSON.stringify(i),{headers:{"Content-Type":"application/json"}}).then((function(e){e&&e.data.success?e.data.data&&(t.setState({shiftId:e.data.data.id}),alert("\u521b\u5efa\u73ed\u6b21\u6210\u529f\uff01")):alert("createShift failed ---\x3e"+JSON.stringify(e))})).catch((function(e){alert("createShift err, "+JSON.stringify(e))}))}},{key:"createGroup",value:function(e){var t=this,a=e.name,n=e.title,s=e.address,i=e.latitude,c=e.longitude,r=this.state.groupData;r.userId=this.state.userId,r.name=a,r.positions[0].title=n,r.positions[0].latitude=i,r.positions[0].longitude=c,r.positions[0].address=s,h.a.post(this.state.domain+"/attendance/createGroup",JSON.stringify(r),{headers:{"Content-Type":"application/json"}}).then((function(e){e&&e.data.success?e.data.data&&(t.setState({groupId:e.data.data.id}),alert("\u521b\u5efa\u8003\u52e4\u7ec4\u6210\u529f\uff01")):alert("createGroup failed ---\x3e"+JSON.stringify(e))})).catch((function(e){alert("createGroup err, "+JSON.stringify(e))}))}},{key:"login",value:function(){h.a.get(this.state.domain+"/getCorpId").then((function(e){e.data})).catch((function(e){alert("corpId err, "+JSON.stringify(e))}))}}]),a}(s.a.Component),D=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,300)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),i(e),c(e)}))};c.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(T,{})}),document.getElementById("root")),D()},85:function(e,t,a){}},[[295,1,2]]]);
//# sourceMappingURL=main.99c78346.chunk.js.map